<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>World Diabetes Day Pledge</title>

    <!-- ✅ Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap");

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: #ffffff;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* ✅ Card */
      .pledge-card {
        background: url("./img/Asset 1@3x.png") no-repeat center center / 100%
          100%;
        max-width: 470px;
        width: 100%;
        text-align: center;
        border-radius: 10px;
        padding: 25px 20px 0;
        position: relative;
        box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
        color: #000;
        overflow: hidden;
      }

      /* Header */
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .header-left {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .blue-circle {
        width: 35px;
        height: 35px;
        border: 4px solid #004aad;
        border-radius: 50%;
        margin-bottom: 6px;
      }

      .header-left h6 {
        font-size: 15px;
        font-weight: 600;
        margin: 0;
        color: #000;
      }

      .header-left h6 span {
        color: #4a90e2;
      }

      .header-left span {
        font-size: 12px;
        color: #004aad;
      }

      .header-right {
        display: flex;
        flex-direction: column;
        text-align: center;
        font-weight: 700;
        color: #004aad;
        font-size: 16.5px;
        line-height: 1.2;
        letter-spacing: 0.3px;
        padding-right: 8px;
      }

      .header-right span {
        display: block;
      }

      .header-right span:nth-child(2) {
        align-self: center;
      }

      /* ✅ Upload Circle */
      .upload-circle {
        margin: 25px auto 20px;
        border: 10px solid #4a90e2;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        background-color: rgba(233, 243, 252, 0.7);
        position: relative;
        overflow: hidden;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #000;
        font-weight: 600;
        text-align: center;
        transition: all 0.2s;
      }

      .upload-circle:hover {
        box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.3);
      }

      .upload-circle img {
        position: absolute;
        width: 100%;
        height: 100%;
        object-fit: cover;
        top: 0;
        left: 0;
      }

      .upload-circle input[type="file"] {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
        z-index: 2;
      }

      /* ✅ Quote Box */
      .quote-box {
        position: relative;
        border: 3px solid #004aad;
        border-radius: 18px;
        padding: 35px 40px 55px;
        margin: 40px 0 30px;
        background: transparent;
        text-align: left;
      }

      .quote-box input,
      .quote-box select {
        border: none;
        background: transparent;
        width: 100%;
        font-weight: 700;
        font-size: 17px;
        color: #000;
        margin-bottom: 12px;
        outline: none;
      }

      .quote-box input,
      .quote-box select {
        background: transparent !important;
        color: #000 !important;
        -webkit-text-fill-color: #000 !important;
        box-shadow: 0 0 0px 1000px transparent inset !important;
      }

      .quote-box input:-webkit-autofill,
      .quote-box select:-webkit-autofill {
        transition: background-color 9999s ease-in-out 0s;
        -webkit-box-shadow: 0 0 0px 1000px transparent inset !important;
        -webkit-text-fill-color: #000 !important;
      }

      /* ✅ Download Button */
      .download-btn {
        position: absolute;
        left: 50%;
        bottom: -28px;
        transform: translateX(-50%);
        background: #fff;
        border: 1px solid #000;
        border-radius: 25px;
        padding: 8px 40px;
        font-weight: 600;
        font-size: 15px;
        color: #000;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        transition: all 0.3s ease;
      }

      .download-btn:hover {
        background: #004aad;
        color: #fff;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25);
      }

      /* ✅ Footer (Logo Bar) */
      .logo-bar {
        background: #fff;
        margin: 40px -20px 0;
        display: flex;
        justify-content: space-around;
        align-items: center;
        border-top: none;
        border-bottom-left-radius: 10px;
        border-bottom-right-radius: 10px;
        padding: 18px 0px;
        flex-wrap: nowrap;
      }

      .logo-bar img {
        flex: 1 1 22%;
        width: 22%;
        height: 120px;
        object-fit: contain;
        filter: brightness(1.1) contrast(1.1);
        transition: all 0.3s ease;
      }

      /* ✅ Make the 4th logo smaller */
      .logo-bar img:last-child {
        width: 19%;
        height: 70px;
        transform: scale(0.93);
      }

      /* ✅ Preview Styling */
      .final-preview .name {
        color: #004aad;
        font-weight: 700;
      }

      .final-preview .designation {
        color: #e60000;
        font-weight: 600;
      }

      .final-preview .pledge {
        color: #000;
        font-weight: 500;
      }

      /* ✅ Responsive Fixes */
      @media (max-width: 1024px) {
        .pledge-card {
          max-width: 90%;
        }

        .logo-bar img {
          width: 22%;
          height: 85px;
        }

        .logo-bar img:last-child {
          width: 19%;
          height: 65px;
          transform: scale(0.93);
        }
      }

      @media (max-width: 768px) {
        .pledge-card {
          padding: 20px 15px 0 15px;
        }

        .upload-circle {
          width: 185px;
          height: 185px;
          border-width: 8px;
        }

        .quote-box {
          padding: 25px 20px 45px;
        }

        .quote-box input,
        .quote-box select {
          font-size: 15px;
        }

        .download-btn {
          bottom: -22px;
          padding: 6px 30px;
          font-size: 14px;
        }

        .logo-bar {
          justify-content: space-around;
          gap: 8px;
          /* padding: 12px; */
        }

        .logo-bar img {
          width: 22%;
          height: 90px;
        }

        .logo-bar img:last-child {
          width: 19%;
          height: 64px;
        }
      }

      @media (max-width: 480px) {
        .header-right {
          font-size: 14px;
        }

        .header-left h6 {
          font-size: 13px;
        }

        .blue-circle {
          width: 28px;
          height: 28px;
          border-width: 3px;
        }

        .upload-circle {
          width: 160px;
          height: 160px;
        }

        .quote-box {
          padding: 20px 18px 40px;
        }

        .download-btn {
          padding: 5px 25px;
          font-size: 13px;
        }

        .logo-bar img {
          width: 21%;
          height: 70px;
        }

        .logo-bar img:last-child {
          width: 18%;
          height: 52px;
        }
      }

      @media (max-width: 360px) {
        .logo-bar img {
          width: 21%;
          height: 45px;
        }

        .logo-bar img:last-child {
          width: 17%;
          height: 40px;
        }
      }
    </style>
  </head>

  <body>
    <div class="pledge-card" id="pledgeCard">
      <div class="header">
        <div class="header-left">
          <div class="blue-circle"></div>
          <h6>world <span style="color: #4a90e2">diabetes</span> day</h6>
          <span>14 November</span>
        </div>
        <div class="header-right">
          <span>DIABETES</span><span>AND</span><span>WELL BEING</span>
        </div>
      </div>

      <div class="upload-circle" id="photoArea">
        <input type="file" id="uploadPhoto" accept="image/*" />
        <span>CLICK<br />Upload Your Photo</span>
      </div>

      <div class="quote-box" id="quoteBox">
        <input
          type="text"
          id="name"
          placeholder="Type your Name"
          autocomplete="off"
        />
        <input
          type="text"
          id="designation"
          placeholder="Type your Designation"
          autocomplete="off"
        />
        <select id="pledge" autocomplete="off">
          <option value="">Select Your Pledge</option>
          <option>Stay Active Daily</option>
          <option>Eat Healthy Meals</option>
          <option>Monitor Blood Sugar</option>
          <option>Spread Awareness</option>
        </select>
        <button class="download-btn" id="downloadBtn">Download</button>
      </div>

      <div class="logo-bar">
        <img src="img/Empozin-03.png" alt="Empozin" />
        <img src="img/ADN-04.png" alt="ADN" />
        <img src="img/Segultide.png" alt="Segultide" />
        <img src="img/Macter.png" alt="Macter" />
      </div>
    </div>

    <script>
      const photoArea = document.getElementById("photoArea");
      const uploadInput = document.getElementById("uploadPhoto");
      const downloadBtn = document.getElementById("downloadBtn");
      const card = document.getElementById("pledgeCard");
      const quoteBox = document.getElementById("quoteBox");

      function setupUploadListener(inputElement) {
        inputElement.addEventListener("change", (e) => {
          const file = e.target.files[0];
          if (!file) return;
          const reader = new FileReader();
          reader.onload = (ev) => {
            photoArea.innerHTML = `
              <img src="${ev.target.result}" alt="photo">
              <input type="file" id="uploadPhoto" accept="image/*"
                style="opacity:0;position:absolute;inset:0;cursor:pointer;">
            `;
            setupUploadListener(photoArea.querySelector("#uploadPhoto"));
          };
          reader.readAsDataURL(file);
        });
      }
      setupUploadListener(uploadInput);

      downloadBtn.addEventListener("click", async () => {
        const name = document.getElementById("name").value.trim();
        const designation = document.getElementById("designation").value.trim();
        const pledge = document.getElementById("pledge").value;

        if (!name || !designation || !pledge) {
          Swal.fire({
            icon: "warning",
            title: "Incomplete Details",
            text: "Please fill all fields before downloading.",
          });
          return;
        }

        const preview = document.createElement("div");
        preview.classList.add("final-preview");
        preview.style.padding = "30px 40px";
        preview.style.border = "3px solid #004aad";
        preview.style.borderRadius = "18px";
        preview.style.textAlign = "left";
        preview.style.fontFamily = "'Poppins', sans-serif";

        preview.innerHTML = `
          <p class="name" style="margin:0;font-size:20px;">${name}</p>
          <p class="designation" style="margin:2px 0 10px 0;font-size:15px;">${designation}</p>
          <p class="pledge" style="margin:0;font-size:16px;">I pledge to ${pledge}</p>
        `;

        quoteBox.replaceWith(preview);

        Swal.fire({
          icon: "success",
          title: "Pledge Submitted!",
          text: "Your pledge has been recorded successfully.",
          showConfirmButton: false,
          timer: 1200,
        });

        setTimeout(() => {
          html2canvas(card, {
            scale: 2,
            useCORS: true,
            backgroundColor: "#ffffff",
          }).then((canvas) => {
            const link = document.createElement("a");
            link.download = "World_Diabetes_Day_Pledge.jpeg";
            link.href = canvas.toDataURL("image/jpeg", 1.0);
            link.click();
            window.location.reload();
          });
        }, 1300);
      });
    </script>
  </body>
</html>
